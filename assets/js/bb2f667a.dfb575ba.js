"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[88107],{3615:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});var t=r(74848),i=r(28453);const l={sidebar_position:6},o="Part 5: Game Mechanics",s={id:"tutorials/platformer-tutorial/part-5-mechanics",title:"Part 5: Game Mechanics",description:"In this part, we'll add game mechanics that make our platformer engaging: collectible coins, a scoring system, and user interface elements.",source:"@site/docs/tutorials/platformer-tutorial/part-5-mechanics.md",sourceDirName:"tutorials/platformer-tutorial",slug:"/tutorials/platformer-tutorial/part-5-mechanics",permalink:"/docs/tutorials/platformer-tutorial/part-5-mechanics",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorials",previous:{title:"Part 4: Platforms and Collision",permalink:"/docs/tutorials/platformer-tutorial/part-4-platforms"}},c={},a=[{value:"What We&#39;ll Accomplish",id:"what-well-accomplish",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Collectible Assets",id:"step-1-collectible-assets",level:2},{value:"Step 2: Create Collectible Class",id:"step-2-create-collectible-class",level:2},{value:"Step 3: Update Contact Listener",id:"step-3-update-contact-listener",level:2},{value:"Step 4: Update GameLayer",id:"step-4-update-gamelayer",level:2},{value:"\ud83c\udfaf Checkpoint: Game Mechanics",id:"-checkpoint-game-mechanics",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Complete Code Reference",id:"complete-code-reference",level:2},{value:"Congratulations! \ud83c\udf89",id:"congratulations-",level:2},{value:"Next Steps for Enhancement",id:"next-steps-for-enhancement",level:2},{value:"Final Complete Code Reference",id:"final-complete-code-reference",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.RP)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"part-5-game-mechanics",children:"Part 5: Game Mechanics"}),"\n",(0,t.jsx)(n.p,{children:"In this part, we'll add game mechanics that make our platformer engaging: collectible coins, a scoring system, and user interface elements."}),"\n",(0,t.jsx)(n.h2,{id:"what-well-accomplish",children:"What We'll Accomplish"}),"\n",(0,t.jsx)(n.p,{children:"By the end of this part, you'll have:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Collectible coin objects with physics"}),"\n",(0,t.jsx)(n.li,{children:"A scoring system that tracks collected coins"}),"\n",(0,t.jsx)(n.li,{children:"UI elements displaying score and other game information"}),"\n",(0,t.jsx)(n.li,{children:"Win condition when all coins are collected"}),"\n",(0,t.jsx)(n.li,{children:"Sound effects for collecting coins"}),"\n",(0,t.jsx)(n.li,{children:"Level completion detection"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Completed ",(0,t.jsx)(n.a,{href:"./part-4-platforms",children:"Part 4: Platforms and Collision"})]}),"\n",(0,t.jsx)(n.li,{children:"Understanding of UI elements in cocos2d-mono"}),"\n",(0,t.jsx)(n.li,{children:"Basic game state management concepts"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"step-1-collectible-assets",children:"Step 1: Collectible Assets"}),"\n",(0,t.jsx)(n.p,{children:"You'll need these assets for collectibles:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"coin.png"})," - Coin sprite"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"coin_pickup.wav"})," - Collection sound effect (optional)"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Add these to your Content folder. Find them in the ",(0,t.jsx)(n.a,{href:"https://github.com/brandmooffin/cocos2d-mono-samples/tree/main/Tutorial%20Samples/Platformer/Final/Platformer/Content",children:"complete project reference"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"step-2-create-collectible-class",children:"Step 2: Create Collectible Class"}),"\n",(0,t.jsxs)(n.p,{children:["Create a new file called ",(0,t.jsx)(n.code,{children:"Collectible.cs"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'using Cocos2D;\r\nusing Box2D.Dynamics;\r\nusing Box2D.Common;\r\nusing Box2D.Collision.Shapes;\r\nusing CocosDenshion;\r\n\r\nnamespace Platformer\r\n{\r\n    public class Collectible : CCSprite\r\n    {\r\n        private b2Body _body;\r\n\r\n        public Collectible(b2World world, float x, float y) : base("coin")\r\n        {\r\n            Position = new CCPoint(x, y);\r\n\r\n            // Create physics body\r\n            b2BodyDef bodyDef = new b2BodyDef();\r\n            bodyDef.type = b2BodyType.b2_staticBody;\r\n            bodyDef.position = new b2Vec2(x / PhysicsHelper.PTM_RATIO, y / PhysicsHelper.PTM_RATIO);\r\n\r\n            _body = world.CreateBody(bodyDef);\r\n\r\n            // Create circle shape for collectible\r\n            b2CircleShape shape = new b2CircleShape();\r\n            shape.Radius = ContentSize.Width * 0.3f / PhysicsHelper.PTM_RATIO;\r\n\r\n            b2FixtureDef fixtureDef = new b2FixtureDef();\r\n            fixtureDef.shape = shape;\r\n            fixtureDef.isSensor = true; // Make it a sensor (no collision response)\r\n            fixtureDef.filter.categoryBits = PhysicsHelper.CATEGORY_COLLECTIBLE;\r\n            fixtureDef.filter.maskBits = PhysicsHelper.CATEGORY_PLAYER;\r\n\r\n            _body.CreateFixture(fixtureDef).UserData = this;\r\n\r\n            // Add a rotation action\r\n            RunAction(new CCRepeatForever(new CCRotateBy(2.0f, 360)));\r\n        }\r\n\r\n        public void Collect(GameLayer gameLayer)\r\n        {\r\n            // Remove from physics world\r\n            _body.World.DestroyBody(_body);\r\n            _body = null;\r\n\r\n            // Play collection animation\r\n            RunAction(new CCSequence(\r\n                new CCScaleTo(0.2f, 1.5f),\r\n                new CCScaleTo(0.2f, 0.0f),\r\n                new CCCallFunc(() => RemoveFromParent())\r\n            ));\r\n\r\n            // Play collection sound\r\n            CCSimpleAudioEngine.SharedEngine.PlayEffect("coin_pickup");\r\n\r\n            // Increase score\r\n            gameLayer.IncreaseScore(10);\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"step-3-update-contact-listener",children:"Step 3: Update Contact Listener"}),"\n",(0,t.jsxs)(n.p,{children:["Update your ",(0,t.jsx)(n.code,{children:"ContactListener.cs"})," to handle coin collection:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// Add this to the BeginContact method in ContactListener.cs\r\npublic override void BeginContact(b2Contact contact)\r\n{\r\n    // ...existing code\r\n            \r\n    // Check for collectible contacts\r\n    CheckCollectibleContact(contact.GetFixtureA(), contact.GetFixtureB());\r\n    CheckCollectibleContact(contact.GetFixtureB(), contact.GetFixtureA());\r\n}\r\n\r\nprivate void CheckCollectibleContact(b2Fixture fixtureA, b2Fixture fixtureB)\r\n{\r\n    // Check if fixA is a collectible and fixB is the player\r\n    Collectible collectible = fixtureA.UserData as Collectible;\r\n    if (collectible != null &&\r\n        fixtureB.Filter.categoryBits == PhysicsHelper.CATEGORY_PLAYER)\r\n    {\r\n        // Get the game layer from the player's parent\r\n        Player.FootSensorUserData playerNode = fixtureB.UserData as Player.FootSensorUserData;\r\n        if (playerNode != null && collectible.Parent is GameLayer gameLayer)\r\n        {\r\n            collectible.Collect(gameLayer);\r\n        }\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"step-4-update-gamelayer",children:"Step 4: Update GameLayer"}),"\n",(0,t.jsxs)(n.p,{children:["Update your ",(0,t.jsx)(n.code,{children:"GameLayer.cs"})," to include collectibles:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"private void CreateLevel()\r\n{\r\n    // ...existing code\r\n\r\n    // Create collectibles\r\n    for (int i = 0; i < 3; i++)\r\n    {\r\n        Collectible coin = new Collectible(_world, 200 + i * 200, 200);\r\n        AddChild(coin);\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-checkpoint-game-mechanics",children:"\ud83c\udfaf Checkpoint: Game Mechanics"}),"\n",(0,t.jsx)(n.p,{children:"At this point, you should have:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u2705 Collectible coins placed throughout the level"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Working score system that updates when coins are collected"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 UI showing current score and coin collection progress"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Sound effects for collecting coins (if audio files are included)"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Test your game"}),": Run the project and verify that:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Coins appear on platforms and animate (rotate and bob)"}),"\n",(0,t.jsx)(n.li,{children:"Walking into coins collects them and increases score"}),"\n",(0,t.jsx)(n.li,{children:"UI updates correctly showing score and coin count"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Coins not collecting"}),": Check that contact listener is handling sensor collisions correctly."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"UI not updating"}),": Verify that event handlers are properly connected to GameManager events."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Sound not playing"}),": Ensure audio files are added to Content folder with proper build action."]}),"\n",(0,t.jsx)(n.h2,{id:"complete-code-reference",children:"Complete Code Reference"}),"\n",(0,t.jsxs)(n.p,{children:["You can find the complete code for this part in the ",(0,t.jsx)(n.a,{href:"https://github.com/brandmooffin/cocos2d-mono-samples/tree/main/Tutorial%20Samples/Platformer/Checkpoints/Part%205",children:"tutorial samples repository"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"congratulations-",children:"Congratulations! \ud83c\udf89"}),"\n",(0,t.jsx)(n.p,{children:"You've successfully created a complete 2D platformer game using cocos2d-mono! Your game features:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Physics-based gameplay"})," with Box2D integration"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Smooth character controls"})," with jump mechanics"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Collectible system"})," with scoring"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Professional polish"})," with effects and animations"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Complete game states"})," from menu to gameplay"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Audio integration"})," for immersive experience"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"next-steps-for-enhancement",children:"Next Steps for Enhancement"}),"\n",(0,t.jsx)(n.p,{children:"Consider adding these features to further improve your game:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Multiple levels with different layouts"}),"\n",(0,t.jsx)(n.li,{children:"Enemy characters with AI"}),"\n",(0,t.jsx)(n.li,{children:"Power-ups and special abilities"}),"\n",(0,t.jsx)(n.li,{children:"Better sprite artwork and animations"}),"\n",(0,t.jsx)(n.li,{children:"Level editor functionality"}),"\n",(0,t.jsx)(n.li,{children:"Achievements and high scores"}),"\n",(0,t.jsx)(n.li,{children:"Mobile touch controls"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"final-complete-code-reference",children:"Final Complete Code Reference"}),"\n",(0,t.jsxs)(n.p,{children:["The complete, final project with all assets can be found in the ",(0,t.jsx)(n.a,{href:"https://github.com/brandmooffin/cocos2d-mono-samples/tree/main/Tutorial%20Samples/Platformer/Final",children:"tutorial samples repository"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Thank you for following this tutorial series! You now have the foundation to create more complex 2D games with cocos2d-mono."})]})}function h(e={}){const{wrapper:n}={...(0,i.RP)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,r)=>{r.d(n,{RP:()=>l});var t=r(96540);const i=t.createContext({});function l(e){const n=t.useContext(i);return t.useMemo(()=>"function"==typeof e?e(n):{...n,...e},[n,e])}}}]);